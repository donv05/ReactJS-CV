{"ast":null,"code":"var _jsxFileName = \"/Users/donguyen/Downloads/Github/src/views/layout/layout.js\";\nimport React from 'react';\nimport './layout.css';\nimport Header from './header/header';\nimport Footer from './footer/footer';\nimport Main from './main/main';\nimport axios from '../../configurations/axiosConfig';\nexport default class Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClickLogout = event => {\n      console.log('logOut');\n      axios.post('/users/logout').then(result => {\n        if (result) {\n          localStorage.removeItem('userInformation');\n          this.props.history.push('/');\n        }\n      }).catch(function (error) {\n        console.log(error);\n      }).finally(function () {// always executed\n      });\n    };\n\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: []\n    };\n    const userInformation = JSON.parse(localStorage.getItem('userInformation'));\n\n    if (!userInformation) {\n      this.props.history.push('/');\n    }\n\n    this.events = ['load', 'mousemove', 'mousedown', 'click', 'scroll', 'keypress'];\n    this.warn = this.warn.bind(this);\n    this.logout = this.logout.bind(this);\n    this.resetTimeout = this.resetTimeout.bind(this);\n\n    for (let i in this.events) {\n      window.addEventListener(this.events[i], this.resetTimeout);\n    }\n\n    this.setTimeout();\n  }\n\n  warn() {\n    console.log(\"You will be logged out automatically in 1 minute.\");\n  }\n\n  clearTimeout() {\n    if (this.warnTimeout) clearTimeout(this.warnTimeout);\n    if (this.logoutTimeout) clearTimeout(this.logoutTimeout);\n  }\n\n  setTimeout() {\n    // console.log('Set timeout')\n    this.warnTimeout = setTimeout(this.warn, 16 * 1000);\n    this.logoutTimeout = setTimeout(this.logout, 60 * 1000);\n  }\n\n  resetTimeout() {\n    // console.log('reset')\n    this.clearTimeout();\n    this.setTimeout();\n  }\n\n  logout() {\n    // Send a logout request to the API\n    console.log(\"Sending a logout request to the API...\");\n    this.setState({\n      logginStatus: false\n    }); // this.destroy(); // Cleanup\n  }\n\n  componentDidMount() {\n    axios.get('/users').then(result => {\n      if (result) {\n        this.setState({\n          isLoaded: true,\n          items: result\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {// always executed\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      props: this.props,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Main, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/donguyen/Downloads/Github/src/views/layout/layout.js"],"names":["React","Header","Footer","Main","axios","Dashboard","Component","constructor","props","handleClickLogout","event","console","log","post","then","result","localStorage","removeItem","history","push","catch","error","finally","state","isLoaded","items","userInformation","JSON","parse","getItem","events","warn","bind","logout","resetTimeout","i","window","addEventListener","setTimeout","clearTimeout","warnTimeout","logoutTimeout","setState","logginStatus","componentDidMount","get","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './layout.css';\r\nimport Header from './header/header'\r\nimport Footer from './footer/footer'\r\nimport Main from './main/main'\r\nimport axios from '../../configurations/axiosConfig'\r\nexport default class Dashboard extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            error: null,\r\n            isLoaded: false,\r\n            items: []\r\n        };\r\n        const userInformation = JSON.parse(localStorage.getItem('userInformation'))\r\n        if (!userInformation) {\r\n            this.props.history.push('/')\r\n        }\r\n        this.events = [\r\n            'load',\r\n            'mousemove',\r\n            'mousedown',\r\n            'click',\r\n            'scroll',\r\n            'keypress'\r\n        ]\r\n        this.warn = this.warn.bind(this);\r\n        this.logout = this.logout.bind(this);\r\n        this.resetTimeout = this.resetTimeout.bind(this);\r\n        for(let i in this.events) {\r\n            window.addEventListener(this.events[i], this.resetTimeout)\r\n        }\r\n        this.setTimeout();\r\n    }\r\n\r\n    warn() {\r\n        console.log(\"You will be logged out automatically in 1 minute.\");\r\n    }\r\n    clearTimeout() {\r\n        if (this.warnTimeout) clearTimeout(this.warnTimeout);\r\n    \r\n        if (this.logoutTimeout) clearTimeout(this.logoutTimeout);\r\n    }\r\n\r\n    setTimeout() {\r\n        // console.log('Set timeout')\r\n        this.warnTimeout = setTimeout(this.warn, 16 * 1000);\r\n        this.logoutTimeout = setTimeout(this.logout, 60 * 1000);\r\n    }\r\n\r\n    resetTimeout() {\r\n        // console.log('reset')\r\n        this.clearTimeout();\r\n        this.setTimeout();\r\n    }\r\n\r\n    logout() {\r\n        // Send a logout request to the API\r\n        console.log(\"Sending a logout request to the API...\");\r\n        this.setState({ logginStatus: false });\r\n        // this.destroy(); // Cleanup\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('/users')\r\n            .then((result) => {\r\n                if (result) {\r\n                    this.setState({\r\n                        isLoaded: true,\r\n                        items: result\r\n                    });\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n            .finally(function () {\r\n                // always executed\r\n            });\r\n    }\r\n    \r\n    handleClickLogout = (event) => {\r\n        console.log('logOut')\r\n        axios.post('/users/logout')\r\n            .then((result) => {\r\n                if (result) {\r\n                    localStorage.removeItem('userInformation')\r\n                    this.props.history.push('/')\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n            .finally(function () {\r\n                // always executed\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Header props={this.props}></Header>\r\n                <Main></Main>\r\n                <Footer></Footer>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}